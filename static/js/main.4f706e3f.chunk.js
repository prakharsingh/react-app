(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5520:function(e,t,a){e.exports=a(5694)},5525:function(e,t,a){},5694:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"SUBMIT_FORM",function(){return S}),a.d(n,"SUBMIT_FORM_SUCCESS",function(){return v}),a.d(n,"SUBMIT_FORM_FAIL",function(){return _}),a.d(n,"SHOW_TOAST",function(){return C}),a.d(n,"HIDE_TOAST",function(){return U});var r={};a.r(r),a.d(r,"UPLOAD_FILE",function(){return w}),a.d(r,"UPLOAD_FILE_PROGRESS",function(){return F}),a.d(r,"UPLOAD_FILE_SUCCESS",function(){return T}),a.d(r,"UPLOAD_FILE_FAIL",function(){return L});var l={};a.r(l),a.d(l,"showToast",function(){return q}),a.d(l,"hideToast",function(){return Z}),a.d(l,"submitForm",function(){return z});var o={};a.r(o),a.d(o,"initiateUpload",function(){return Y});var c,i=a(0),u=a.n(i),m=a(27),s=a.n(m),p=(a(5525),a(30)),d=a(5696),E=a(5697),b=a(208),g=a(107),f=a(15),h=a(32),O=a(120),y=a(35),S="app/SUBMIT_FORM",v="app/SUBMIT_FORM_SUCCESS",_="app/SUBMIT_FORM_FAIL",C="app/SHOW_TOAST",U="app/HIDE_TOAST",w="storage/UPLOAD_FILE",F="storage/UPLOAD_FILE_PROGRESS",T="storage/UPLOAD_FILE_SUCCESS",L="storage/UPLOAD_FILE_FAIL",A={isLoading:!1,showToast:!1,toastMessage:""},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,l=void 0===r?null:r;switch(a){case n.SHOW_TOAST:return Object(y.a)({},e,{showToast:!0,toastMessage:l.message||""});case n.HIDE_TOAST:return Object(y.a)({},e,{showToast:!1,toastMessage:""});case n.SUBMIT_FORM:return Object(y.a)({},e,{isLoading:!0});case n.SUBMIT_FORM_SUCCESS:case n.SUBMIT_FORM_FAIL:return Object(y.a)({},e,{isLoading:!1});default:return e}},j={isLoading:!1,progress:0,fileName:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,l=void 0===n?null:n;switch(a){case r.UPLOAD_FILE:return Object(y.a)({},e,{isLoading:!0,fileName:l.fileName||""});case r.UPLOAD_FILE_SUCCESS:return Object(y.a)({},e,{isLoading:!1,progress:0});case r.UPLOAD_FILE_PROGRESS:return Object(y.a)({},e,{progress:l&&l.progress});case r.UPLOAD_FILE_FAIL:return Object(y.a)({},e,{isLoading:!1,progress:0,fileName:""});default:return e}},R=Object(h.a)(),M=[Object(g.routerMiddleware)(R),b.a],N=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d)(f.a.apply(void 0,M)),P=Object(f.e)((c=R,Object(f.c)({router:Object(g.connectRouter)(c),form:O.a,app:I,storage:x})),{},N),D=a(11),k=a(7),B=a(12),H=a(211),W=a(85),G=a.n(W),q=function(e){var t=e.message;return function(e){return e({type:n.SHOW_TOAST,payload:{message:t}})}},Z=function(){return function(e){return e({type:n.HIDE_TOAST})}},z=function(e){return function(t){G.a.post("".concat("https://cors-anywhere.herokuapp.com/http://production.u36msqhyut.us-east-1.elasticbeanstalk.com","/api/submit")).send(e).end(function(e){if(t({type:n.SUBMIT_FORM}),e)return t({type:n.SHOW_TOAST,payload:{message:"Error in submitting..."}}),t({type:n.SUBMIT_FORM_FAIL});t({type:n.SHOW_TOAST,payload:{message:"Submitted Successfully"}}),t({type:n.SUBMIT_FORM_SUCCESS})})}},J=a(205),K=a.n(J),V=a(210),X=a(79),$=function(e){return G.a.get("".concat("https://cors-anywhere.herokuapp.com/http://production.u36msqhyut.us-east-1.elasticbeanstalk.com","/api/storage/s3/signed-url/public-read")).query(e)},Q=function(e,t,a){return G.a.post(e).field(t).attach("file",a,a.name)},Y=function(e){var t=e.file,a=e.key;return function(){var e=Object(V.a)(K.a.mark(function e(l){var o,c,i,u,m,s;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l({type:r.UPLOAD_FILE,payload:{fileName:t.name}}),e.next=4,$({key:a});case 4:if(o=e.sent,c=o.body,200!==o.statusCode){e.next=20;break}return i={key:c.key,AWSAccessKeyId:c.awsKey,policy:c.policy,signature:c.signature,acl:"public-read","content-type":t.type},e.next=11,Q(c.host,i,t).on("progress",function(e){return l({type:r.UPLOAD_FILE_PROGRESS,payload:{progress:Math.round(e.percent)}})});case 11:if(u=e.sent,m=u.error,s=u.statusCode,!m){e.next=16;break}throw new Error(m);case 16:return s>=200&&s<301&&(l(Object(X.a)("userForm","profilePicUrl","".concat("https://s3.amazonaws.com/assets-prakhar/").concat(decodeURIComponent(a)),"")),l({type:r.UPLOAD_FILE_SUCCESS})),e.abrupt("return",l({type:n.SHOW_TOAST,payload:{message:"Upload Successful"}}));case 20:throw new Error("Upload Failed");case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),l({type:r.UPLOAD_FILE_FAIL}),l({type:n.SHOW_TOAST,payload:{message:"Upload failed"}});case 27:case"end":return e.stop()}},e,this,[[0,23]])}));return function(t){return e.apply(this,arguments)}}()},ee=Object(p.connect)(function(e){return{app:e.app}},function(e){return Object(f.b)({hideToast:l.hideToast},e)})(Object(D.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(function(e){var t=e.app,a=t.showToast,n=t.toastMessage,r=e.hideToast,l=e.classes,o=function(e,t){"clickaway"!==t&&r()};return u.a.createElement(B.n,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:a,onClose:o,message:u.a.createElement("span",null,n),action:[u.a.createElement(B.h,{key:"close","aria-label":"Close",color:"inherit",className:l.close,onClick:o},u.a.createElement(H.a,null))]})})),te=Object(D.createMuiTheme)({typography:{useNextVariants:!0}}),ae=function(e){var t=e.component;return u.a.createElement(D.MuiThemeProvider,{theme:te},u.a.createElement(k.Grid,{fluid:!0},u.a.createElement(t,null),u.a.createElement(ee,null)))},ne=a(113),re=a(114),le=a(121),oe=a(115),ce=a(122),ie=a(118),ue=a(117),me=a(203),se=function(e){var t=e.input,a=e.meta,n=a.touched,r=a.error,l=Object(me.a)(e,["input","meta"]);return u.a.createElement(B.e,{error:n&&!!r,fullWidth:!0},u.a.createElement(B.o,Object.assign({},t,l,{error:n&&!!r})),n&&r&&u.a.createElement(B.g,null,r))},pe=function(e){var t=e.input,a=e.children,n=Object(me.a)(e,["input","children"]);return u.a.createElement(B.e,null,u.a.createElement(B.l,Object.assign({},t,n,{value:t.value,onChange:function(e,a){return t.onChange(a)}}),a))},de=function(e){var t=e.input,a=e.label,n=e.meta,r=n.touched,l=n.error,o=e.children,c=Object(me.a)(e,["input","label","meta","children"]);return u.a.createElement(B.e,{error:r&&!!l,fullWidth:!0},u.a.createElement(B.i,null,a),u.a.createElement(B.m,Object.assign({},t,{onChange:function(e){return t.onChange(e.target.value)}},c),o))},Ee=a(201),be=a(104),ge=a.n(be),fe=function(e){function t(){return Object(ne.a)(this,t),Object(le.a)(this,Object(oe.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.storage,r=n.isLoading,l=n.progress,o=n.fileName,c=t.values;return u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{type:"file",accept:"image/*",ref:function(t){return e.input=t},onChange:this.props.handleFile,hidden:!0}),u.a.createElement("div",{className:a.container},u.a.createElement(B.a,{color:"primary",variant:"contained",className:a.button,onClick:function(){return e.input.click()},disabled:r},u.a.createElement(ge.a,{className:a.leftIcon}),"Upload"),r&&u.a.createElement(u.a.Fragment,null,u.a.createElement(B.d,{className:a.progress,variant:"indeterminate"},l),u.a.createElement("span",null,o))),c&&c.profilePicUrl&&u.a.createElement("div",{className:a.imageContainer},u.a.createElement(B.b,{className:a.card},u.a.createElement(B.c,{className:a.media,image:c.profilePicUrl||"",title:"profile-pic"}))))}}]),t}(u.a.Component),he=Object(p.connect)(function(e){return{storage:e.storage,values:Object(Ee.a)("userForm")(e)}},null)(Object(D.withStyles)(function(e){return{button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},progress:{margin:e.spacing.unit},container:{display:"flex",alignItems:"center"},card:{maxWidth:150},media:{height:140,width:140},imageContainer:{marginTop:-104,float:"right"}}})(fe)),Oe=["location","city","country","membership"],ye=Object(ue.a)({form:"userForm",validate:function(e){var t={};return Oe.forEach(function(a){e[a]||(t[a]="Required")}),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Email not valid"),t}})(function(e){var t=e.isSubmitDisabled,a=e.submitting,n=e.handleSubmit,r=e.onFileUpload,l=e.values;return console.log(l)||u.a.createElement("form",{onSubmit:n},u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:6},u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"category",label:"Category",component:de},u.a.createElement(B.j,{value:"1"},"Category 1"),u.a.createElement(B.j,{value:"2"},"Category 2"),u.a.createElement(B.j,{value:"3"},"Category 3")))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(B.p,{variant:"body1",gutterBottom:!0},"Do you want to create a branch in existing or new category?"))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"categoryType",component:pe},u.a.createElement(B.f,{value:"new",control:u.a.createElement(B.k,null),label:"New"}),u.a.createElement(B.f,{value:"existing",control:u.a.createElement(B.k,null),label:"Existing"})))),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"busNameEng",label:"Business Name(English)",variant:"outlined",component:se})),u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"busNameArab",label:"Business Name(Arabic)",variant:"outlined",component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"branchNameEng",label:"Branch Name(English)",variant:"outlined",component:se})),u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"branchNameArab",label:"Branch Name(Arabic)",variant:"outlined",component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"location",label:"Location*",variant:"outlined",component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"city",label:"City*",variant:"outlined",component:se})))),u.a.createElement(k.Col,{md:6},u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"country",label:"Country*",variant:"outlined",component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"instaUrl",label:"Instagram Url (optional)",variant:"outlined",component:se})),u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"fbUrl",label:"Facebook Url (optional)",variant:"outlined",component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"about",label:"About",variant:"outlined",multiline:!0,rows:2,component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"email",label:"Email (optional)",variant:"outlined",component:se})),u.a.createElement(k.Col,{md:6},u.a.createElement(ie.a,{name:"phone",label:"Phone Number (optional)",variant:"outlined",component:se}))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(ie.a,{name:"membership",label:"Membership Type*",component:de},u.a.createElement(B.j,{value:"1"},"Monthly"),u.a.createElement(B.j,{value:"2"},"Annual")))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(k.Col,{md:12},u.a.createElement(B.p,{variant:"body1",gutterBottom:!0},"Profile Pic (optional)",u.a.createElement(B.p,{variant:"caption",gutterBottom:!0},"Appropriate image ratio should be 16:9")),u.a.createElement(ie.a,{name:"profilePicUrl",type:"text",component:"input",hidden:!0}),u.a.createElement(he,{handleFile:r}))))),u.a.createElement("br",null),u.a.createElement(k.Row,null,u.a.createElement(B.a,{type:"submit",color:"secondary",variant:"contained",disabled:a||t},"Submit")))}),Se=function(){return"xxxyxxxxxxyxxxxxxxxxyyyyxxxxxyyyyyxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},ve=function(e){function t(){var e,a;Object(ne.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(le.a)(this,(e=Object(oe.a)(t)).call.apply(e,[this].concat(r)))).getNewFileName=function(e){var t=e.split("."),a=t.length-1;return Se()+"-"+Date.now()+"."+t[a]},a.handleUpload=function(e){var t=e.target.files[0],n=encodeURIComponent("public-read/"+a.getNewFileName(t.name));a.props.initiateUpload({file:t,key:n})},a}return Object(ce.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this.props,t=e.submit,a=e.storage.isLoading;return u.a.createElement(u.a.Fragment,null,u.a.createElement(k.Row,{center:"md"},u.a.createElement(B.p,{variant:"h5",gutterBottom:!0},"Business Details")),u.a.createElement("hr",null),u.a.createElement(ye,{onSubmit:function(e){return t(e)},onFileUpload:this.handleUpload,isSubmitDisabled:a}))}}]),t}(u.a.Component);ve.defaultProps={};var _e=Object(p.connect)(function(e){return{storage:e.storage}},function(e){return Object(f.b)({submit:l.submitForm,initiateUpload:o.initiateUpload},e)})(ve);s.a.render(u.a.createElement(function(){return u.a.createElement(p.Provider,{store:P},u.a.createElement(d.a,{history:R,basename:"/react-app"},u.a.createElement(E.a,null,u.a.createElement(ae,{exact:!0,path:"/",component:_e}))))},null),document.getElementById("root"))}},[[5520,2,1]]]);
//# sourceMappingURL=main.4f706e3f.chunk.js.map